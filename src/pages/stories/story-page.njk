---
pagination: 
    data: collections.stories
    size: 1
    alias: story
    addAllPagesToCollections: true
layout: layouts/base-layout.njk
permalink: /{{story.slug}}/
og_type: "article"
eleventyComputed:
    title: "{{ story.name | truncate(150) }} "
    thumbnail: "{{meta.site_url}}/images/og-images/og-{{ story.slugs }}.png"
    emojicon: "{{ story.icon }}"
    description: "{{story.excerpt}}"
    eleventyNavigation:
        key: "{{story.id}}"
        title: "{{story.name}}"
        parent: Stories
---

{% extends "layouts/story-layout.njk" %}
{% set story_contribution_url = contribute.tally_url+"?slugs="+story.slugs+"&title="+story.name+"&category="+story.category.name %}
{% block aside %}
    <div data-layout="stack" data-props="space:s">

    {# <p itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span aria-hidden="true" data-font="emoji">üë§</span>
        Written by
        <span itemprop="name">
            {{ meta.author.name }}
        </span>
        <link itemprop="url" href="{{ meta.author.url }}"/>
    </p> #}
    {# <span data-props="space:0">
        <span data-font="emoji">‚è±</span>
        {{ story.description | emojiReadTime }}
    </span> #}

        <h2 id="readMore" data-heading="5">Read More</h2>
        <p>Have a look at related findings</p>
        {% set entries = stories | similarStories(story.id, story.category.name) | limitTo(1) %}
        {% if entries.length == 0 %}
        {% set entries = stories | limitTo(1) %}
        {% endif %}
            <ul
                data-props="space:2xs">
                {%- for entry in entries %}
                    <li itemscope itemtype="http://schema.org/Article">
                        <a data-link itemprop="url" href="/findings/{{ entry.slugs }}">{{ entry.name }}</a>
                        <meta itemprop="headline" content="{{ entry.name }}"/>
                    </li>
                {% endfor -%}
            </ul>
    </div>
    {# <figure>
                        {{ meta.site_url| qrcode | safe }}
                        <figcaption class="visually-hidden">Share link</figcaption>
                    </figure> #}
{% endblock %}
{% block main %}
    <header aria-labelledby="story-name" data-layout="stack" id="cover" data-props="space:m">
        {% if emojicon %}
            <span data-heading="3" aria-hidden="true" data-font="emoji">{{ emojicon }}</span>
        {% endif %}
        <h1 itemprop="headline" id="story-name" data-heading="1" data-props="centered noBorder noMeasure">
            {{ story.name }}
        </h1>
        <div data-layout="cluster">
            <span>
                <span data-font="emoji">üìÖ</span>
                Created on
                <time itemprop="datePublished" datetime="{{ story.created }}">{{ story.created | readableDate }}</time>
            </span>
            <span>
                <span data-font="emoji">üîÅ</span>
                Last update on
                <time itemprop="dateModified" datetime="{{ story.edited }}">{{ story.edited | readableDate }}</time>
            </span>
            <span>
                <span data-font="emoji">üî∞</span>
                Categorized under
                <a href="/categories/{{ story.category.name | slugify }}" data-button="tag small">{{ story.category.name }}</a>
            </span>
            <link itemprop="thumbnailUrl" href="{{ thumbnail }}"/> {% set type = story.type.name %}
        </div>
        {% if type == "Insight" %}
            <div data-layout="box" data-props="noPad">
                <header data-layout="box" data-props="noBorder invert">
                    <span data-font="sans-serif" data-heading="6">
                        <span data-font="emoji" aria-hidden="true">üî≠</span>
                        Finding  marked as Insight
                    </span>
                </header>
                <div data-layout="box" data-props="noBorder noMeasure">
                    <p>
                    Currently this finding does not include enough research based references. You can help improve its reliability in the
                        <a href="#contribute">contribution section</a>
                    </p>
                </div>
            </div>
        {% endif %}
        <meta itemprop="description" content="{{ story.excerpt }}"/>
        <meta itemprop="teaches" content="{{ story.category.name }}"/>
    </header>
    <section aria-labelledby="summary">
        <div data-layout="stack" data-props="space:xs">
            <h2 id="summary" data-heading="2 anchor">
                <a href="#summary">Overview</a>
            </h2>
            <div itemprop="articleBody" data-layout="stack" data-markdown>
                {% renderTemplate "md, liquid", story %}
                {{ description }}
                {% endrenderTemplate %}
            </div>
        </div>
    </section>
    <section aria-labelledby="references">
        <div data-layout="stack" data-props="space:xs">
            <h2 id="references" data-heading="anchor">
                <a href="#references">References and Further Reading</a>
            </h2>
            <ul role="list" data-props="noPad">
                {%- for reference in story.references %}
                    {% include "partials/reference-item.njk" %}
                {% endfor -%}
            </ul>
        </div>
    </section>
    <section aria-labelledby="contribute">
        <div data-layout="stack" data-props="space:xs">
            <h2 id="contribute" data-heading="anchor">
                <a href="#contribute">Contribution</a>
            </h2>
            <div data-layout="box" data-props="noPad">
                <header data-layout="box" data-props="noBorder invert">
                    <h3 data-heading="5">
                        <span data-font="emoji" aria-hidden="true">üó®</span>
                        Help improve this entry
                    </h3>
                </header>
                <div data-layout="box stack" data-props="noBorder">
                    <p>
                        Please share ideas, suggestions, or comments via direct submission, twitter or Email
                    </p>
                    <div data-layout="switcher" style="--threshold: 78ch;">
                        <a data-button="primary" data-props="x:center" href="{{ story_contribution_url }}" target="_blank">
                            <span aria-hidden="true" data-font="emoji">üñã</span>
                            Edit entry</a>
                        <a
                            data-button="primary"
                            data-props="x:center"
                            href="https://twitter.com/intent/tweet?text={{ story.name }}%20via%20@FrontendStories&url={{ meta.site_url }}{{ page.url }}"
                            target="_blank">
                            <span aria-hidden="true" data-font="emoji">üê§</span>Mention on Twitter</a>
                        <a
                            data-button="primary"
                            data-props="x:center"
                            href="mailto:{{ meta.author.email }}?subject=[FS Contribution] {{ story.name }}">
                            <span aria-hidden="true" data-font="emoji">‚úâ</span>Send direct email</a>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section aria-label="Navigate" data-layout="stack">
        <hr data-props="space:0"/>
        <h2 data-heading="6" id="pagination-nav" data-props="space:s">Navigate to other findings</h2>
        <nav
            class="story-pagination-navigation"
            aria-labelledby="pagination-nav"
            data-layout="switcher"
            data-props="x:between y:stretch">
            {% if pagination.href.previous %}
                <a data-button data-layout="stack" class="previous-button" data-props="space:0 x:start y:start" href="{{ pagination.href.previous }}">
                    <span>
                        <span aria-hidden="true" data-font="emoji">‚óÄÔ∏è</span>
                        Previous item</span>
                    <b>{{ pagination.page.previous.name }}</b>
                </a>
            {% endif %}
            {% if pagination.href.next %}
                <a data-layout="stack" class="next-button" data-button data-props="space:0 x:start y:end" href="{{ pagination.href.next }}">
                        <span>
                            Next item
                        <span aria-hidden="true" data-font="emoji">‚ñ∂Ô∏è</span>
                        </span>
                    <b>{{ pagination.page.next.name }}</b>
                </a>
            {% endif %}
        </nav>
    </section>
{% endblock %}