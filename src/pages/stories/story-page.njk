---
pagination: 
    data: collections.stories
    size: 1
    alias: story
    addAllPagesToCollections: true
layout: layouts/base-layout.njk
permalink: /{{story.slug}}/
og_type: "article"
eleventyComputed:
    title: "{{ story.name | truncate(150) }} "
    thumbnail: "{{meta.site_url}}/images/og-images/og-{{ story.slugs }}.jpeg"
    emojicon: "{{ story.icon }}"
    description: "{{story.excerpt}}"
    eleventyNavigation:
        key: "{{story.id}}"
        title: "{{story.name}}"
        parent: Stories
---

{% extends "layouts/story-layout.njk" %}
{% block aside %}
    <p>
        <span data-font="emoji">üìÖ</span>
        <time itemprop="datePublished" datetime="{{ story.created }}">{{ story.created | readableDate }}</time>
        <meta itemprop="dateModified" datetime="{{ story.edited }}" content="{{ story.edited }}"/>
    </p>
    <p>
        <span data-font="emoji">‚è±</span>
        {{ story.description | emojiReadTime }}
    </p>
    <p itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span data-font="emoji">üë§</span>
        <span itemprop="name">
            {{ meta.author.name }}
        </span>
        <link itemprop="url" href="{{ meta.author.url }}"/>
    </p>
    {# <figure>
                                                {{ meta.site_url| qrcode | safe }}
                                                <figcaption class="visually-hidden">Share link</figcaption>
                                            </figure> #}
{% endblock %}
{% block main %}
    <header
        aria-labelledby="story-name" id="cover">
        {# {% if emojicon %}
                                                                    <span aria-hidden data-font="emoji">{{ emojicon }}</span>
                                                                {% endif %} #}
        <div data-props="x:start  noBorder">
            <link itemprop="thumbnailUrl" href="{{ story.thumbnail }}"/>
            <h1 itemprop="headline" id="story-name" data-heading="1" data-props="centered noBorder">
                {{ story.name }}
            </h1>
            <meta itemprop="description" content="{{ story.excerpt }}"/>
            <meta itemprop="teaches" content="{{ story.category.name }}"/>
        </div>
    </header>
    <section aria-labelledby="summary">
        <div data-layout="stack" data-props="space:xs">
            <h2 id="summary" data-heading="2 anchor">
                <a href="#summary">Summary</a>
            </h2>
            <div itemprop="articleBody" data-layout="stack" data-markdown>
                {% renderTemplate "md, liquid", story %}
                {{ description }}
                {% endrenderTemplate %}
            </div>
        </div>
    </section>
    <section aria-labelledby="references">
        <div data-layout="stack" data-props="space:xs">
            <h2 id="references" data-heading="anchor">
                <a href="#references">References</a>
            </h2>
            <ul data-layout="stack" data-props="noPad x:stretch space:xs">
                {%- for reference in story.references %}
                    {% include "partials/reference-item.njk" %}
                {% endfor -%}
            </ul>
        </div>
    </section>
    <section aria-labelledby="contribute">
        <div data-layout="stack" data-props="space:xs">
            <h2 id="contribute" data-heading="anchor">
                <a href="#contribute">Contribute and give feedback</a>
            </h2>
            <p>If you would like to provide feedback or contribute content on this resource, please fill out the
                <b>
                    <a data-link href="{{ contribute.tally_url }}?slugs={{ story.slugs }}&title={{ story.name }}&category={{ story.category.name }}&description={{ story.description }}" target="_blank">this form</a>
                </b>.
            </p>
        </div>
    </section>
    <section>
        <span class="visually-hidden" data-heading="6" id="pagination-nav">Navigate to other stories</span>
        <nav
            class="story-pagination-navigation"
            aria-labelledby="pagination-nav"
            data-layout="switcher"
            data-props="x:between y:stretch">
            {% if pagination.href.previous %}
                <a data-button data-layout="stack" data-props="space:0" href="{{ pagination.href.previous }}">
                    <span>
                        <span aria-hidden="true" data-font="emoji">‚óÄÔ∏è</span>
                        Previous item</span>
                    <span>{{ pagination.page.previous.name | truncate(40) }}</span>
                </a>
            {% endif %}
            {% if pagination.href.next %}
                <a data-layout="stack" data-button data-props="space:0 y:end" href="{{ pagination.href.next }}">
                    <div>
                        <span>
                            Next item
                        </span>
                        <span aria-hidden="true" data-font="emoji">‚ñ∂Ô∏è</span>
                    </div>
                    <p>{{ pagination.page.next.name | truncate(40) }}</p>
                </a>
            {% endif %}
        </nav>
    </section>
{% endblock %}